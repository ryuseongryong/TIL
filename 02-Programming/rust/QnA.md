# 참고
- https://github.com/rust-lang/book
- https://doc.rust-lang.org/1.30.0/book/first-edition/macros.html#hygiene

# macro in rust(1.30 version description)
- 매크로는 컴파일 시 실행된다. 매크로는 일반적으로 컴파일러가 추가로 처리해야 하는 새로운 코드 조각으로 확장된다.
- 코드를 추상화하고 재사용하기 위해 러스트가 제공하는 많은 도구들이 있다.
- 이런 코드 재사용 단위에는 풍부한 의미구조가 있다. 예를 들어 함수에는 타입 시그니처가 있고, 타입 매개변수에는 특성 바운드가 있으며, 오버로드된 함수는 특정 특성에 속해야 한다.
- 이런 구조 덕분에 러스트의 핵심 추상화에는 강력한 컴파일-타임 정확성 체크 기능이 있다. 그러나 이는 유연성이 저하된다는 비용이 있다. 반복되는 코드의 패턴을 시각적으로 식별하는 경우 해당 패턴을 일반 함수, 특성 등으로 표현하는 것이 어렵거나 번거로울 수 있다.
- 매크로를 사용하면 구문 수준에서 추상화할 수 있다. 매크로 호출은 확장된 구문 형식의 줄임말이다. 이 확장은 정적 검사 전에 컴파일 초기에 발생한다. 결과적으로 매크로는 러스트의 핵심 추상화로는 포착할 수 없는 많은 코드 재사용 패턴을 포착할 수 있다.
- 단점은 매크로 기반 코드는 내장된 규칙이 더 적게 적용되기 때문에 이해하기 어려울 수 있다는 것이다. 일반 함수와 마찬가지로 잘 동작하는 매크로는 구현을 이해하지 않고도 사용할 수 있다. 하지만 잘 동작하는 매크로를 설계하는 것은 어려울 수 있다. 또한 매크로 코드의 컴파일러 오류는 개발자가 사용하는 소스 수준 형식이 아닌 확장된 코드의 문제를 설명하기 때문에 해석이 어려울 수 있다.