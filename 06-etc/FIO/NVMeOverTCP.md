- https://www.computerweekly.com/opinion/Need-rapid-networked-storage-Take-a-look-at-NVMe-over-TCP 를 번역한 문서입니다.

    - By Sagi Grimberg, CTO, Lightbits Labs 
    - Published: 11 Jan 2022

# Intro
데이터 스토리지에서 속도가 중요한 요소가 되었다. 실제 최근 ESG가 설문 조사한 IT 조직의 90%가 3년 전 보다 더 빠르게 동작해야한다고 답했고, 41%는 응답 속도가 50% 이상 빨라졌다고 했다.

현대 비즈니스에서 경쟁에서 성공하려면 확장 가능하고 매우 효율적인 IT 운영이 필요하지만, 데이터의 급속한 증가는 종종 IT 인프라의 복잡성으로 이어져 IT 팀을 까다로운 상황에 처하게 합니다.

IT 팀은 IT 인프라를 현대화하는 동시에 필요할 때 신속하게 대응할 수 있도록 운영 관리 활동을 간소화해야 합니다. 이러한 상황에서 네트워크 전반에 걸쳐 NVMe 스토리지 풀을 생성할 수 있는 고성능 NVMe 플래시 스토리지가 필요합니다.

조직은 평균적으로 온프레미스 데이터 환경의 용량이 매년 35%씩 증가할 것으로 예상하고 있으며, 3년 이내에 용량이 두 배로 늘어날 것으로 예상하고 있습니다.

한편, 스토리지 환경이 고성능 데이터 액세스에 대한 수요 증가에 발맞추기 위해 NVMe 기반 스토리지에 대한 의존도가 점점 더 높아지고 있습니다.

NVMe는 SAS 또는 SATA와 같은 기존 프로토콜보다 더 높은 수준의 성능과 짧은 지연 시간을 제공하며, 네트워크 전반으로 NVMe의 짧은 지연 시간 이점을 확장하기 위해 NVMe-oF(NVMe over fabric)가 등장했습니다.

ESG 조사에 따르면, IT 조직의 28%는 이미 NVMe-oF를 사용하고 있으며, 42%는 향후 12개월 내에 이를 배포할 준비가 되어 있습니다. 조직은 종종 파이버 채널 또는 기타 원격 직접 메모리 액세스(RDMA) 패브릭과 같은 여러 NVMe-oF 옵션 중 하나를 선택합니다. 문제는 이러한 옵션이 복잡하고 비용이 많이 들며 특수 장비가 필요한 경우가 많다는 것입니다. 이것이 바로 NVMe-over-TCP가 필요한 이유입니다.

# NVMe-over-TCP transforms the datacentre

NVMe-over-TCP는 잘 구축된 생태계를 갖춘 업계 표준입니다. 라이트비츠 랩은 메타(페이스북), 인텔, Cisco, Dell EMC, 마이크론과 함께 NVMe-over-TCP 표준을 개발했으며, 이 표준은 2018년 말 NVM Express 컨소시엄에 의해 링크 전송 계층으로 비준되었습니다. 이 표준이 특별한 이유는 무엇일까요?

NVMe-over-TCP는 데이터센터의 직접 연결 스토리지에 플래시 스토리지가 로컬에 있는 것처럼 짧은 레이턴시를 제공합니다. 하지만 이는 네트워크를 통해 표준 이더넷 TCP/IP 네트워킹 장비에서 이루어지며, 동일한 이더넷/TCP 네트워크에서 훨씬 더 높은 수준의 IOPS를 제공합니다.

이 접근 방식은 이더넷을 기반으로 하기 때문에 새로운 하드웨어 투자가 필요하지 않으므로 비용 효율적이며, 특히 하이브리드 클라우드 배포에 적합합니다.

또한, 스토리지 리소스의 완벽한 분배를 통해 NVMe-over-TCP는 IT 팀이 애플리케이션과 가상 머신에 필요한 만큼만 할당할 수 있도록 지원합니다. 따라서 사용하지 않는 공간이 더 이상 할당되지 않으므로 전력 소비가 감소합니다.

NVMe-over-TCP는 TCP/IP의 보급과 구축 용이성으로 인해 NVMe의 주류 시장 채택을 촉진하는 핵심 기술이 될 것으로 예상됩니다. 이 기술은 로컬 플래시와 유사한 성능을 제공하면서 네트워크 NVMe를 대규모로 쉽게 구축할 수 있게 해줍니다. 이 표준은 TCP 전송을 활용함으로써 네트워크 인프라 관리를 간소화하는 동시에 스토리지 구매자에게 다양한 옵션과 유연성을 제공하는 공급업체 상호 운용성을 보장합니다.

이러한 공급업체 지원은 지난 9월 VMware가 vSphere 업데이트에서 NVMe-over-TCP에 대한 지원을 발표하면서 상당히 확대되었습니다. 사용자에게 제공되는 주요 이점은 배포의 간소화, VMware Storage vMotion을 사용하는 표준 마이그레이션 경로, 쉽고 중단 없는 사용 및 유지 관리입니다.

NVMe 및 NVMe-oF와 같은 프로토콜은 초고속, 저지연 플래시 스토리지를 지원하므로 기업은 Kubernetes를 비롯한 분산 애플리케이션을 실행하고 거의 실시간으로 데이터에 액세스할 수 있습니다.

NVMe-over-TCP는 IT 아키텍처의 현대화뿐만 아니라 단순화를 필요로 하는 조직에 비용, 속도, 배포 용이성 측면에서 상당한 이점을 제공합니다.

특히 VMware 환경에서는 이 새로운 표준을 통해 비즈니스 크리티컬 워크로드의 요구 사항을 충족하는 수준으로 레이턴시를 낮출 수 있습니다.



## More on NVMe-over-TCP
NVMe-over-TCP는 표준 IP 네트워크를 통해 초고속 플래시를 제공합니다. TCP는 NVMe 플래시 스토리지를 연결하는 데 사용할 수 있는 최신 전송 프로토콜입니다. NVMe-over-TCP의 작동 방식과 데이터센터 고객을 위한 주요 이점을 설명합니다.
NVMe-over-TCP와 엣지 스토리지의 장점과 단점. NVMe-over-TCP는 마침내 스토리지의 주류로 진입하고 있으며 엣지 데이터 스토리지에 특히 유용할 수 있습니다. 이 접근 방식의 장단점을 알아보세요.

---
- https://www.netapp.com/data-storage/nvme/what-is-nvme/를 번역한 문서입니다.

# NVMe, NVMe-oF, NVMe/FC and NVMe/TCP defined

NVMe(비휘발성 메모리 익스프레스)는 플래시 및 차세대 SSD(솔리드 스테이트 드라이브)를 위한 새로운 스토리지 액세스 및 전송 프로토콜로, 모든 유형의 엔터프라이즈 워크로드에 역대 최고의 처리량과 가장 빠른 응답 시간을 제공합니다.

오늘날 소비자 앱과 비즈니스 모두에서 사용자들은 애플리케이션 자체가 훨씬 더 복잡해지고 리소스 의존도가 높아짐에도 불구하고 더욱 빠른 응답 시간을 기대합니다.

고대역폭, 저지연 사용자 경험을 제공하기 위해 NVMe 프로토콜은 수만 개의 병렬 명령 대기열을 지원하는 PCI 익스프레스(PCIe) 버스를 통해 플래시 스토리지에 액세스하므로 단일 명령 대기열로 제한되는 하드 디스크 및 기존 올플래시 아키텍처보다 훨씬 더 빠릅니다.

NVMe 사양은 모든 종류의 컴퓨팅 환경에서 비휘발성 메모리의 이점을 활용합니다. 또한 아직 개발되지 않은 영구 메모리 기술과 함께 작동하도록 확장할 수 있는 미래 지향적인 기술입니다.

# Benefits of NVMe for data storage

NVMe 스토리지는 시간을 절약해 주기 때문에 엔터프라이즈 데이터 센터에서 큰 주목을 받고 있습니다.

기계식 하드 디스크 드라이브 시대에 설계된 프로토콜과 달리 NVMe는 솔리드 스테이트 스토리지뿐만 아니라 오늘날의 멀티코어 CPU와 기가바이트 메모리도 활용합니다.
또한 NVMe 스토리지는 간소화된 명령 세트를 활용하여 데이터를 효율적으로 구문 분석하고 조작합니다.

# NVMe use cases

NVMe 스토리지는 이미 마이크로초 단위가 중요한 비즈니스 시나리오에서 사용되고 있습니다:

- 금융, 이커머스, 소프트웨어 판매 대리점 등 실시간 고객 상호 작용
- 인공 지능(AI), 머신 러닝(ML), 빅데이터 및 고급 분석 앱
- 더 짧은 시간에 더 많은 반복을 실행할 수 있도록 지원하는 DevOps

# NVMe over Fabrics (NVMe-oF)
NVMe는 단순히 더 빠른 플래시 스토리지가 아니라 스토리지 시스템과 서버 간에 데이터를 훨씬 더 효율적으로 전송할 수 있는 엔드투엔드 표준입니다.
- NVMe 오버 패브릭은 이더넷, 파이버 채널, 인피니밴드와 같은 네트워크 패브릭 전반에 걸쳐 NVMe의 성능 및 레이턴시 이점을 확장합니다.
- 호스트 소프트웨어 스택에서 데이터 패브릭을 거쳐 스토리지 어레이에 이르기까지 더 높은 IOPS와 짧은 레이턴시를 제공합니다.

# NVMe over Fibre Channel (NVMe/FC)

NetApp®ONTAP® 은 현재 NVMe를 파이버 채널로 지원합니다.

많은 기업이 파이버 채널의 성능과 안정성, 그리고 패브릭 기반 조닝 및 네임 서비스 지원으로 인해 전체 인프라를 파이버 채널 중심으로 구축했습니다.

데이터베이스와 같은 애플리케이션은 FCP(기본 파이버 채널 연결이 있는 SCSI 프로토콜)에 비해 NVMe/FC 프로토콜을 사용할 때 훨씬 더 빠르게 실행됩니다. ONTAP NVMe/FC 트래픽은 동일한 파이버 채널 패브릭에서 FCP 트래픽과 함께 상주할 수 있으므로 NVMe/FC를 쉽게 시작할 수 있습니다. ONTAP AFF 시스템을 사용하는 많은 고객에게 이것은 단순히 무중단 소프트웨어 업그레이드입니다.

# NVMe over TCP (NVMe/TCP)

NVMe/TCP는 NVMe/FC와 마찬가지로 NVMe-oF를 달성하기 위한 경로를 제공하지만, 이더넷을 통해 실행되며 NVMe 명령과 데이터를 TCP 데이터그램 안에 캡슐화합니다.

NVMe/TCP는 데이터 전송을 위한 더 많은 수의 대기열과 대기열 경로를 지원하므로 iSCSCI에 비해 처리량이 크게 증가하고 대기 시간이 단축됩니다.

NVMe/TCP가 특히 유리한 점은 배포에 특별한 하드웨어가 필요하지 않다는 점입니다. iSCSI와 마찬가지로 NVMe/TCP는 모든 이더넷 NIC 및 스위치를 사용할 수 있으므로 배포 및 유지 관리가 더 간단하고 비용이 적게 듭니다. 모든 TCP 네트워크에 배포할 수 있으므로 온프레미스 또는 클라우드에서 사용할 수 있습니다. 유연성이 뛰어나기 때문에 블록 스토리지 솔루션을 제공하고자 하는 클라우드 서비스 제공업체에게 특히 매력적인 NVMe/TCP입니다. 성능 향상, 클라우드 유연성, 낮은 TCO, 배포 간소화로 인해 향후 iSCSI를 NVMe/TCP로 대체하는 사례가 점점 더 늘어날 것입니다.

NVMe/FC와 NVMe/TCP를 모두 지원하므로 고객은 최신 SAN 인프라 요구 사항을 가장 잘 충족하기 위해 배포할 프로토콜을 선택할 수 있으며, 두 프로토콜을 동시에 사용하거나 필요에 따라 자유롭게 전환할 수도 있습니다. 이는 기업 및 클라우드 서비스 제공업체가 비즈니스 성능을 최적화하고 비용을 절감할 수 있는 간단하고 유연한 방법이 될 것입니다.

