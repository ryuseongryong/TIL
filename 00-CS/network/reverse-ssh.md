# 기존에 연결되고 있던 포트와 연결이 끊기고 제대로 동작하지 않는 상태 분석
- `Warning: remote port forwarding failed for listen port 10001` 와 같은 경고 메시지 이후 연결이 끊어짐
- reverse-ssh 데몬을 실행하고 있는 ssh는 자동으로 연결이 끊어지면 다시 연결을 시도하도록 설정되어 있음.
- 데이터 전송이 없더라도 다시 연결되도록 설정되어 있어, 엣지가 종료되지 않는 한 원격으로 컨트롤 하는 것에 문제가 없도록 설정되어 있음.
- 하지만 reverse-ssh 서버에서는 연결이 되어 있지 않는 경우를 확인함.
- 해당 엣지에 접속해서 확인하니 `Warning: remote port forwarding failed for listen port 10001` 경고 메시지가 있었음.
- 해당 경고 메시지는 ssh 연결이 끊어졌다는 것을 의미함. 연결이 끊어질 수 있는 세 가지 시나리오가 있음.
    1. 연결된 다른 쪽 끝이 완전히 유휴 상태인 동안 두 엔드포인트 중 하나가 재부팅됨
    2. 두 엔드포인트 중 하나가 연결을 닫았지만 연결이 닫히는 시점에 연결이 일시적으로 중단되었음. 연결이 종료된 후 몇 분 동안 지속되었기 때문에 다른 쪽 끝에서는 연결이 종료되었다는 사실을 알지 못함
    3. ssh 연결의 양쪽 끝점에서 여전히 연결이 완전히 작동하지만, 누군가 연결 사이에 상태 저장 장치를 실시하여 유휴 상태로 인해 연결 시간이 초과됨. 이 상태 저장 장치는 NAT 또는 방화벽일 수 있음.

- 이어 KeepAlive 키워드를 사용하면 해결된다고 안내함.
- 이미 ServerAliveInterval을 적용해뒀고, ClientAliveInterval 또한 적용되어 있음
- 우리가 항상 컨트롤 할 수 있는 reverse-ssh 서버를 재부팅 하면 자연스럽게 재연결이 되어 해결은 가능한 상황.