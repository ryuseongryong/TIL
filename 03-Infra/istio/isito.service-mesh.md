- https://istio.io/latest/about/service-mesh/

# Istio 서비스 메시

Istio는 개발자와 운영자가 분산 또는 마이크로서비스 아키텍처에서 직면하는 문제를 해결합니다. 처음부터 새로 구축하든 기존 애플리케이션을 클라우드 네이티브로 마이그레이션하든 Istio가 도와드릴 수 있습니다.

배포된 모든 애플리케이션과 함께 프록시 '사이드카'를 추가함으로써 Istio를 사용하면 애플리케이션 인식 트래픽 관리, 놀라운 가시성, 강력한 보안 기능을 네트워크에 프로그래밍할 수 있습니다.

## 서비스 메시란 무엇인가요?
최신 애플리케이션은 일반적으로 마이크로서비스의 분산된 컬렉션으로 설계되며, 각 마이크로서비스 컬렉션은 개별적인 비즈니스 기능을 수행합니다. 서비스 메시란 애플리케이션에 추가할 수 있는 전용 인프라 계층입니다. 이를 통해 통합 가시성, 트래픽 관리 및 보안과 같은 기능을 자체 코드에 추가하지 않고도 투명하게 추가할 수 있습니다. "서비스 메시"라는 용어는 이 패턴을 구현하는 데 사용하는 소프트웨어의 유형과 해당 소프트웨어를 사용할 때 생성되는 보안 또는 네트워크 도메인을 모두 설명합니다.

Kubernetes 기반 시스템과 같은 분산 서비스의 배포가 규모와 복잡성이 커짐에 따라 이해하고 관리하기가 더 어려워질 수 있습니다. 이러한 요구 사항에는 검색, 로드 밸런싱, 장애 복구, 메트릭 및 모니터링이 포함될 수 있습니다. 또한 서비스 메시는 A/B 테스트, 카나리아 배포, 속도 제한, 액세스 제어, 암호화 및 엔드투엔드 인증과 같은 보다 복잡한 운영 요구 사항을 해결하는 경우가 많습니다.

서비스 간 통신은 분산 애플리케이션을 가능하게 하는 요소입니다. 애플리케이션 클러스터 내 또는 클러스터 간에 이러한 통신을 라우팅하는 작업은 서비스 수가 증가함에 따라 점점 더 복잡해지고 있습니다. Istio는 이러한 복잡성을 줄이는 동시에 개발팀의 부담을 덜어줍니다.

## Istio란 무엇인가요?
Istio는 기존 분산 애플리케이션에 투명하게 계층화되는 오픈 소스 서비스 메시입니다. Istio의 강력한 기능은 서비스를 보호하고, 연결하고, 모니터링하는 통일되고 효율적인 방법을 제공합니다. Istio는 서비스 코드를 거의 또는 전혀 변경하지 않고도 로드 밸런싱, 서비스 간 인증, 모니터링을 수행할 수 있는 경로입니다. 강력한 컨트롤 플레인은 다음과 같은 중요한 기능을 제공합니다:

TLS 암호화, 강력한 ID 기반 인증 및 권한 부여를 통해 클러스터에서 서비스 간 통신을 보호합니다.
HTTP, gRPC, WebSocket, TCP 트래픽에 대한 자동 로드 밸런싱
다양한 라우팅 규칙, 재시도, 장애 조치, 장애 인젝션으로 트래픽 동작을 세밀하게 제어
액세스 제어, 속도 제한 및 할당량을 지원하는 플러그형 정책 계층 및 구성 API
클러스터 내 모든 트래픽에 대한 자동 메트릭, 로그 및 추적(클러스터 수신 및 송신 포함)
Istio는 확장성을 위해 설계되었으며 다양한 배포 요구 사항을 처리할 수 있습니다. Istio의 컨트롤 플레인은 Kubernetes에서 실행되며, 해당 클러스터에 배포된 애플리케이션을 메시로 추가하고, 메시를 다른 클러스터로 확장하거나, Kubernetes 외부에서 실행되는 VM 또는 기타 엔드포인트를 연결할 수도 있습니다.

기여자, 파트너, 통합 및 배포자로 구성된 대규모 에코시스템이 다양한 시나리오에 맞게 Istio를 확장하고 활용합니다. 직접 설치하거나 여러 공급업체에서 Istio를 통합하고 관리해주는 제품을 제공합니다.

## 작동 방식
Istio는 데이터 플레인과 제어 플레인의 두 가지 구성 요소로 이루어져 있습니다.

데이터 플레인은 서비스 간의 통신입니다. 서비스 메시가 없으면 네트워크는 전송되는 트래픽을 이해하지 못하며 트래픽의 유형이나 트래픽의 발신자 또는 수신자를 기반으로 어떠한 의사 결정도 내릴 수 없습니다.

서비스 메시에서는 프록시를 사용하여 모든 네트워크 트래픽을 가로채므로 설정한 구성에 따라 다양한 애플리케이션 인식 기능을 사용할 수 있습니다.

Envoy 프록시는 클러스터에서 시작하는 각 서비스와 함께 배포되거나 VM에서 실행 중인 서비스와 함께 실행됩니다.

컨트롤 플레인은 원하는 구성과 서비스에 대한 보기를 가져와 프록시 서버를 동적으로 프로그래밍하여 규칙이나 환경이 변경되면 업데이트합니다.

## 컨셉

### 트래픽 관리
단일 클러스터 내 및 클러스터 간 트래픽 라우팅은 성능에 영향을 미치고 더 나은 배포 전략을 가능하게 합니다. Istio의 트래픽 라우팅 규칙을 사용하면 서비스 간 트래픽 및 API 호출의 흐름을 쉽게 제어할 수 있습니다. Istio는 회로 차단기, 시간 초과, 재시도와 같은 서비스 수준 속성의 구성을 간소화하고, 백분율 기반 트래픽 분할을 통해 A/B 테스트, 카나리아 배포, 단계적 롤아웃과 같은 중요한 작업을 쉽게 설정할 수 있게 해줍니다.

### 관찰 가능성
서비스가 복잡해짐에 따라 행동과 성능을 파악하기가 어려워지고 있습니다. Istio는 서비스 메시 내의 모든 통신에 대한 상세한 원격 분석을 생성합니다. 이 원격 분석은 서비스 동작에 대한 관찰 가능성을 제공하여 운영자가 애플리케이션을 문제 해결, 유지 관리 및 최적화할 수 있도록 지원합니다. 더 좋은 점은 애플리케이션을 변경할 필요 없이 거의 모든 계측 기능을 사용할 수 있다는 것입니다. 운영자는 Istio를 통해 모니터링되는 서비스가 어떻게 상호 작용하는지 철저히 이해할 수 있습니다.

Istio의 원격 분석에는 상세한 메트릭, 분산 추적, 전체 액세스 로그가 포함됩니다. Istio를 사용하면 철저하고 포괄적인 서비스 메시 통합 가시성을 확보할 수 있습니다.

### 보안 기능
마이크로서비스에는 중간자 공격에 대한 보호, 유연한 액세스 제어, 감사 도구, 상호 TLS 등 특별한 보안 요구사항이 있습니다. Istio에는 운영자가 이러한 모든 문제를 해결할 수 있는 포괄적인 보안 솔루션이 포함되어 있습니다. 강력한 ID, 강력한 정책, 투명한 TLS 암호화, 인증, 권한 부여 및 감사(AAA) 도구를 제공하여 서비스와 데이터를 보호합니다.

Istio의 보안 모델은 기본적으로 보안을 기반으로 하며, 신뢰할 수 없는 네트워크에서도 보안을 고려한 애플리케이션을 배포할 수 있도록 심층적인 방어 기능을 제공하는 것을 목표로 합니다.

